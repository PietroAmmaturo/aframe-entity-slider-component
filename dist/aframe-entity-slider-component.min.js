!function(i,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e=t();for(var r in e)("object"==typeof exports?exports:i)[r]=e[r]}}(this,(()=>(()=>{if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");return AFRAME.registerComponent("entity-slider",{schema:{state:{type:"string",default:"still"},duration:{type:"float",default:2},offset:{type:"string",default:"2 0 0"},forwardTrigger:{type:"selector"},backwardTrigger:{type:"selector"},toShow:{type:"float",default:4}},events:{slideForward:function(i){this.startSlidingForward()},slideBackward:function(i){this.startSlidingBackward()}},init:function(){var i=this.data.offset.split(" ").map(Number);this.distanceVector=new THREE.Vector3(i[0],i[1],i[2]),this.animationStartingTime=null,this.slideEl_collection=this.el.children,this.slideEl_collection_length=this.slideEl_collection.length,this.buildSlides()},update:function(i){var t=this.data;if(i.offset&&t.offset!==i.offset){var e=this.data.offset.split(" ").map(Number);this.distanceVector=new THREE.Vector3(e[0],e[1],e[2]),this.buildSlides()}var r=this;i.forwardTrigger&&t.forwardTrigger!==i.forwardTrigger&&t.forwardTrigger.removeEventListener("click",r.triggerSlideForward.bind(r)),i.backwardTrigger&&t.backwardTrigger!==i.backwardTrigger&&t.backwardTrigger.removeEventListener("click",r.triggerSlideBackward.bind(r)),t.forwardTrigger&&t.forwardTrigger.addEventListener("click",r.triggerSlideForward.bind(r)),t.backwardTrigger&&t.backwardTrigger.addEventListener("click",r.triggerSlideBackward.bind(r))},remove:function(){var i=this.data;this.el,i.forwardTrigger&&i.forwardTrigger.removeEventListener("click",this.triggerSlideForward),i.backwardTrigger&&i.forwardTrigger.removeEventListener("click",this.triggerSlideBackward)},buildSlides:function(){var i=new THREE.Vector3(0,0,0),t=new THREE.Vector3(0,0,0),e=this.distanceVector,r=this.slideEl_collection,n=this.slideEl_collection_length;for(let o=0;o<n;o++){var a=r[o];a.index=o,a.object3D.position.set(i.x,i.y,i.z),t=i,i.addVectors(t,e)}this.updateVisibility()},triggerSlideForward:function(){var i=this.data;this.el,"still"==i.state&&this.el.emit("slideForward")},triggerSlideBackward:function(){var i=this.data;this.el,"still"==i.state&&this.el.emit("slideBackward")},startSlidingForward:function(){var t=this.data,e=this.slideEl_collection,r=this.slideEl_collection_length,n=this.distanceVector;for(i=0;i<r;i++)e[i].index++,e[i].index==r&&(e[i].setAttribute("visible","true"),e[i].index=-1,e[i].object3D.position.set(e[i].index*n.x,e[i].index*n.y,e[i].index*n.z),e[i].index++);t.state="slidingForward"},startSlidingBackward:function(){var t=this.data,e=this.slideEl_collection,r=this.slideEl_collection_length;for(this.distanceVector,i=0;i<r;i++)e[i].index==t.toShow&&e[i].setAttribute("visible","true");t.state="slidingBackward"},updateAnimationTime:function(i){null==this.animationStartingTime&&(this.animationStartingTime=i),this.animationTime=i-this.animationStartingTime},checkAnimationEnd:function(){var i=this.data;return this.animationTime>=1e3*i.duration?1:0},startAnimationEndRoutine:function(){var i=this.data;this.animationStartingTime,i.state="still",this.animationStartingTime=null},updateVisibility:function(){var t=this.data,e=this.slideEl_collection,r=this.slideEl_collection_length;for(i=0;i<r;i++)e[i].index<t.toShow&&e[i].setAttribute("visible","true"),e[i].index>=t.toShow&&e[i].setAttribute("visible","false")},moveForward:function(){var t=this.slideEl_collection,e=this.slideEl_collection_length,r=this.distanceVector;for(i=0;i<e;i++)t[i].object3D.position.set(t[i].index*r.x,t[i].index*r.y,t[i].index*r.z);this.updateVisibility()},moveBackward:function(){var t=this.slideEl_collection,e=this.slideEl_collection_length,r=this.distanceVector;for(i=0;i<e;i++)t[i].index--,-1==t[i].index&&(t[i].index=e-1),t[i].object3D.position.set(t[i].index*r.x,t[i].index*r.y,t[i].index*r.z);this.updateVisibility()},animateForward:function(i,t,e){var r,n=this.slideEl_collection,a=this.slideEl_collection_length;for(let o=0;o<a;o++)r=n[o].object3D.position,n[o].object3D.position.set(r.x+i,r.y+t,r.z+e)},animateBackward:function(i,t,e){var r,n=this.slideEl_collection,a=this.slideEl_collection_length;for(let o=0;o<a;o++)r=n[o].object3D.position,n[o].object3D.position.set(r.x-i,r.y-t,r.z-e)},tick:function(i,t){this.slideEl_collection,this.slideEl_collection_length;var e=this.distanceVector,r=e.x*(t/1e3)/this.data.duration,n=e.y*(t/1e3)/this.data.duration,a=e.z*(t/1e3)/this.data.duration;if("slidingForward"==this.data.state){if(this.updateAnimationTime(i),this.checkAnimationEnd())return this.startAnimationEndRoutine(),void this.moveForward();this.animateForward(r,n,a)}else{if("slidingBackward"!=this.data.state)return;if(this.updateAnimationTime(i),this.checkAnimationEnd())return this.startAnimationEndRoutine(),void this.moveBackward();this.animateBackward(r,n,a)}},pause:function(){},play:function(){}}),{}})()));